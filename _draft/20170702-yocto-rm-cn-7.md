
### Chapter 7. 源目录结构[¶][1886]

The [Source Directory][4526] consists of several components. Understanding them and knowing where they are located is key to using the Yocto Project well. This chapter describes the Source Directory and gives information about the various files and directories.
[Source Directory][4526] 包含了几个组件。理解它们和知道它们在什么位置是用好 Yocto 项目的关键。本章描述了源目录，并且提供了关于多个文件和目录的信息。

For information on how to establish a local Source Directory on your development system, see the "[Getting Set Up][4527]" section in the Yocto Project Development Manual.
关于如何在你的开发系统上建立一个本地源码目录的信息，参见 Yocto Project Development Manual 的 "[Getting Set Up][4527]" 一节。

### Note

The OpenEmbedded build system does not support file or directory names that contain spaces. Be sure that the Source Directory you use does not contain these types of names.
OpenEmbedded 构建系统不支持文件或者目录的名称包含空格。确保你使用的源目录不包含这些类型的名字。

### 7.1. 顶层组件 [¶][1194]

This section describes the top-level components of the [Source Directory][4236].
本章描述了 [Source Directory][4236] 的顶层组件。

### 7.1.1. `bitbake/`[¶][580]

This directory includes a copy of BitBake for ease of use. The copy usually matches the current stable BitBake release from the BitBake project. BitBake, a [Metadata][3956] interpreter, reads the Yocto Project Metadata and runs the tasks defined by that data. Failures are usually from the Metadata and not from BitBake itself. Consequently, most users do not need to worry about BitBake.
这个目录包含了为了易用的目的包含了一份 BitBake 的拷贝。这份拷贝通常和 BitBake 项目目前稳定的 BitBake 发布版匹配。BitBake，一个 [Metadata][3956] 解释器，读取 Yocto 项目的元数据，运行这些数据定义的 task。失败的通常是元数据而不是 BitBake 它本身。因此，大部分用户不需要担心 BitBake。

When you run the `bitbake` command, the main BitBake executable, which resides in the `bitbake/bin/` directory, starts. Sourcing an environment setup script (e.g. [`oe-init-build-env`][3957] or [`oe-init-build-env-memres`][3958]) places the `scripts` and `bitbake/bin` directories (in that order) into the shell's `PATH` environment variable.
当你运行 `bitbake` 命令，主要的 BitBake 执行程序，位于 `bitbake/bin/` 目录，开始执行。执行环境设置脚本（比如 [`oe-init-build-env`][3957] 或 [`oe-init-build-env-memres`][3958]）和 `bitbake/bin` 将 `scripts` 和 `bitbake/bin` 目录（按顺序）添加到 shell 的 `PATH` 环境变量。

For more information on BitBake, see the [BitBake User Manual][3959].
更多关于 BitBake 的信息，参见 [BitBake User Manual][3959]。

### 7.1.2. `build/`[¶][581]

This directory contains user configuration files and the output generated by the OpenEmbedded build system in its standard configuration where the source tree is combined with the output. The [Build Directory][3960] is created initially when you `source` the OpenEmbedded build environment setup script (i.e. [`oe-init-build-env`][3961] or [`oe-init-build-env-memres`][3962]).
这个目录包含了用户配置文件和 OpenEmbedde 构建系统在它的标准配置，这里源码树适合输出结合到一起的，产生的输出结果。 [Build Directory][3960] 是在你 `source` OpenEmbedded 构建环境设置脚本（即 [`oe-init-build-env`][3961] or [`oe-init-build-env-memres`][3962]）时创建的。

It is also possible to place output and configuration files in a directory separate from the [Source Directory][3963] by providing a directory name when you `source` the setup script. For information on separating output from your local Source Directory files, see the "[`oe-init-build-env`][3964] and "[`oe-init-build-env-memres`][3965]" sections.
也可以在你 `source` 设置脚本时通过提供一目录名称来讲输出和配置文件放到一个不同于 [Source Directory][3963] 的目录。更多关于从本地源目录树分离输出的信息参见 "[`oe-init-build-env`][3964] and "[`oe-init-build-env-memres`][3965]" 一节。

### 7.1.3. `documentation/`[¶][582]

This directory holds the source for the Yocto Project documentation as well as templates and tools that allow you to generate PDF and HTML versions of the manuals. Each manual is contained in a sub-folder. For example, the files for this manual reside in the `ref-manual/` directory.
这个目录保存了 Yocto 项目文档的源码，同样又有模板和工具允许你生成 PDF  和 HTML 版本的手册。每个手册存放在一个子文件夹。举个例子，本文所在的手册位于 `ref-manual/` 目录。

### 7.1.4. `meta/`[¶][583]

This directory contains the OpenEmbedded Core metadata. The directory holds recipes, common classes, and machine configuration for emulated targets (`qemux86`, `qemuarm`, and so forth.)
这个目录包含了 OpenEmbedde Core 的元数据。这个目录保留了 recipe，普通 class，以及为模拟目标（`qemux86`，`qemuarm`，等等）准备的机器配置。

### 7.1.5. `meta-poky/`[¶][584]

This directory contains the configuration for the Poky reference distribution.
这个目录包含了 Pokey 参考分销的配置。

### 7.1.6. `meta-yocto-bsp/`[¶][585]

This directory contains the Yocto Project reference hardware Board Support Packages (BSPs). For more information on BSPs, see the [Yocto Project Board Support Package (BSP) Developer's Guide][3966].
这个目录包含了 Yocto 项目参考硬件 BSP。更多关于 BSP 的信息参见 [Yocto Project Board Support Package (BSP) Developer's Guide][3966]。

### 7.1.7. `meta-selftest/`[¶][586]

This directory adds additional recipes and append files used by the OpenEmbedded selftests to verify the behavior of the build system.
这个目录添加了 OpenEmbedded 用来自测验证构建系统的额外的 recipe 和 append 文件。

You do not have to add this layer to your `bblayers.conf` file unless you want to run the selftests.
你不需要添加这个 layer 到你的 `bblayers.conf` 文件，除非你想运行这个自测。

### 7.1.8. `meta-skeleton/`[¶][587]

This directory contains template recipes for BSP and kernel development.
这个目录包含了 BSP 和内核开发的模板 recipe。

### 7.1.9. `scripts/`[¶][588]

This directory contains various integration scripts that implement extra functionality in the Yocto Project environment (e.g. QEMU scripts). The [`oe-init-build-env`][3967] and [`oe-init-build-env-memres`][3968] scripts append this directory to the shell's `PATH` environment variable.
这个目录包含了各种集成脚本，实现了 Yocto 项目环境的额外功能（比如，QEMU 脚本）。[`oe-init-build-env`][3967] 和 [`oe-init-build-env-memres`][3968] 脚本添加这个目录到 shell 的 `PATH` 环境变量。

The `scripts` directory has useful scripts that assist in contributing back to the Yocto Project, such as `create-pull-request` and `send-pull-request`.
这个 `scripes` 目录有很有用的脚本可以协助贡献回 Yocto 项目，比如 `create-pull-request` 和 `send-pull-request` 。

### 7.1.10. `oe-init-build-env`[¶][589]

This script is one of two scripts that set up the OpenEmbedded build environment. For information on the other script, see the "[`oe-init-build-env-memres`][3969]" section.
这个脚本是两个设置 OpenEmbedde 构建环境脚本中的一个。关于另一个脚本的信息，参见 "[`oe-init-build-env-memres`][3969]" 一节。

Running this script with the `source` command in a shell makes changes to `PATH` and sets other core BitBake variables based on the current working directory. You need to run an environment setup script before running BitBake commands. The script uses other scripts within the `scripts` directory to do the bulk of the work.
在 shell 使用 `source` 命令运行这个脚本改变了 `PATH` 并且基于当前工作目录设置了其它核心 BitBake 变量。在运行 BitBake 命令之前你需要运行一个环境设置脚本。这个脚本使用其它位于 `scripts` 的脚本来做一堆工作。

When you run this script, your Yocto Project environment is set up, a [Build Directory][3970] is created, your working directory becomes the Build Directory, and you are presented with a list of common BitBake targets. Here is an example:
当你运行这个脚本，你的 Yocto 项目环境就配置好了， 创建了一个 [Build Directory][3970]， 你的工作目录变成这个目录，你会被展示出一串 BitBake 命令。下面是个例子：

```
     $ source oe-init-build-env

     ### Shell environment set up for builds. ###

     You can now run 'bitbake <target>'

     Common targets are:
         core-image-minimal
         core-image-sato
         meta-toolchain
         meta-ide-support

     You can also run generated qemu images with a command like 'runqemu qemux86'

```

The script gets its default list of common targets from the `conf-notes.txt` file, which is found in the `meta-poky` directory within the [Source Directory][3971]. Should you have custom distributions, it is very easy to modify this configuration file to include your targets for your distribution. See the "[Creating a Custom Template Configuration Directory][3972]" section in the Yocto Project Development Manual for more information.
这个脚本从 `conf-notes.txt` 获取默认的普通目标，这些可以在 [Source Directory][3971] 的 `meta-poky` 目录中找到。你应该有些自定义分销，很容易通过修改这个配置文件将你的目标包含进你的发布版。参见 Yocto Project Development Manual 的 "[Creating a Custom Template Configuration Directory][3972]"  一节获取更多的信息。

By default, running this script without a [Build Directory][3973] argument creates the `build` directory in your current working directory. If you provide a Build Directory argument when you `source` the script, you direct the OpenEmbedded build system to create a Build Directory of your choice. For example, the following command creates a Build Directory named `mybuilds` that is outside of the [Source Directory][3974]:
默认情况下，运行这个脚本而不提供 [Build Directory][3973] 参数会在你当前工作目录创建一个 `build` 目录。如果你在 `source` 脚本时提供了一个 Build Directory 参数，你就命令 OpenEmbedde 构建系统创建一个你选择的目录。举个例子，下面的命令创建了一个位于 [Source Directory][3974] 之外的名为 `mybuilds` 的 Build Directory：

```
     $ source oe-init-build-env ~/mybuilds

```

The OpenEmbedded build system uses the template configuration files, which are found by default in the `meta-poky/conf` directory in the [Source Directory][3975]. See the "[Creating a Custom Template Configuration Directory][3976]" section in the Yocto Project Development Manual for more information.
OpenEmbedded 构建系统使用默认在 [Source Directory][3975] 的 `meta-poky/conf` 找到的模板配置文件。参见 Yocto Project Development Manual 中 "[Creating a Custom Template Configuration Directory][3976]" 一节。

### Note

The OpenEmbedded build system does not support file or directory names that contain spaces. If you attempt to run the `oe-init-build-env` script from a Source Directory that contains spaces in either the filenames or directory names, the script returns an error indicating no such file or directory. Be sure to use a Source Directory free of names containing spaces.
OpenEmbedde 构建系统不支持文件或文件夹名称包含空格。如果你尝试在包含文件名中有空格的文件盒目录的 Source Directory 中运行 `oe-init-build-env` 脚本，这个脚本会返回错误提示找不到这些文件或目录。确定使用的 Source Directory 没有包含空格的名字。

### 7.1.11. `oe-init-build-env-memres`[¶][590]

This script is one of two scripts that set up the OpenEmbedded build environment. Aside from setting up the environment, this script starts a memory-resident BitBake server. For information on the other setup script, see the "[`oe-init-build-env`][3977]" section.

Memory-resident BitBake resides in memory until you specifically remove it using the following BitBake command:

```
     $ bitbake -m

```

Running this script with the `source` command in a shell makes changes to `PATH` and sets other core BitBake variables based on the current working directory. One of these variables is the [`BBSERVER`][3978] variable, which allows the OpenEmbedded build system to locate the server that is running BitBake.

You need to run an environment setup script before using BitBake commands. Following is the script syntax:

```
     $ source oe-init-build-env-memres port_number build_dir

```

Following are some considerations when sourcing this script:

*   The script uses other scripts within the `scripts` directory to do the bulk of the work.

*   If you do not provide a port number with the script, the BitBake server starts at a randomly selected port.

*   The script's parameters are positionally dependent. Consequently, you cannot run the script and provide a [Build Directory][1195] name without also providing a port number. In other words, the following syntax is illegal:

    ```
         $ source oe-initbuild-env-memres build_dir

    ```

    ### Note

    The previous restriction might be resolved in the future. See [Bug 7555][1196] for more information.

When you run this script, your Yocto Project environment is set up, a Build Directory is created, your working directory becomes the Build Directory, and you are presented with a list of common BitBake targets. Here is an example:

```
     $ source oe-init-build-env-memres
     No port specified, using dynamically selected port

     ### Shell environment set up for builds. ###

     You can now run 'bitbake <target>'

     Common targets are:
         core-image-minimal
         core-image-sato
         meta-toolchain
         meta-ide-support

     You can also run generated qemu images with a command like 'runqemu qemux86'
     Bitbake server address: 127.0.0.1, server port: 53995
     Bitbake server started on demand as needed, use bitbake -m to shut it down

```

The script gets its default list of common targets from the `conf-notes.txt` file, which is found in the `meta-poky` directory within the [Source Directory][3979]. Should you have custom distributions, it is very easy to modify this configuration file to include your targets for your distribution. See the "[Creating a Custom Template Configuration Directory][3980]" section in the Yocto Project Development Manual for more information.

By default, running this script without a [Build Directory][3981] argument creates a build directory named `build`. If you provide a Build Directory argument and port number when you `source` the script, the Build Directory is created using that name. For example, the following command starts the BitBake server using port 53995 and creates a Build Directory named `mybuilds` that is outside of the [Source Directory][3982]:

```
     $ source oe-init-build-env-memres 53995 ~/mybuilds

```

The `oe-init-build-env-memres` script starts a memory resident BitBake server. This BitBake instance uses the `bitbake-cookerdaemon.log` file, which is located in the Build Directory.

The OpenEmbedded build system uses the template configuration files, which are found by default in the `meta-poky/conf` directory in the [Source Directory][3983]. See the "[Creating a Custom Template Configuration Directory][3984]" section in the Yocto Project Development Manual for more information.

### Note

The OpenEmbedded build system does not support file or directory names that contain spaces. If you attempt to run the `oe-init-build-env-memres` script from a Source Directory that contains spaces in either the filenames or directory names, the script returns an error indicating no such file or directory. Be sure to use a Source Directory free of names containing spaces.

### 7.1.12. `LICENSE, README, and README.hardware`[¶][591]

These files are standard top-level files.

### 7.2. The Build Directory - `build/`[¶][1197]

The OpenEmbedded build system creates the [Build Directory][4237] when you run one of the build environment setup scripts (i.e. [`oe-init-build-env`][4238] or [`oe-init-build-env-memres`][4239]).
OpenEmbedded 构建系统在你运行构建环境脚本中的一个（即 [`oe-init-build-env`][4238] or [`oe-init-build-env-memres`][4239] ）时创建的 [Build Directory][4237]。

If you do not give the Build Directory a specific name when you run a setup script, the name defaults to `build`.
当你运行设置脚本时如果你不为 Build Directory 提供一个指定名称，默认名称是 `build`。

The [`TOPDIR`][4240] variable points to the Build Directory.
变量 [`TOPDIR`][4240] 指向 Build Directory。

### 7.2.1. `build/buildhistory`[¶][592]

The OpenEmbedded build system creates this directory when you enable the build history feature. The directory tracks build information into image, packages, and SDK subdirectories. For information on the build history feature, see the "[Maintaining Build Output Quality][3985]" section.
OpenEmbedded 构建系统在你是能了构建历史特性后创建这个目录。这个目录的子目录存放跟踪镜像，软件包，和 SDK 的信息。关于构建历史特性的信息参见"[Maintaining Build Output Quality][3985]" 一节。

### 7.2.2. `build/conf/local.conf`[¶][593]

This configuration file contains all the local user configurations for your build environment. The `local.conf` file contains documentation on the various configuration options. Any variable set here overrides any variable set elsewhere within the environment unless that variable is hard-coded within a file (e.g. by using '=' instead of '?='). Some variables are hard-coded for various reasons but these variables are relatively rare.
这个配置文件包含了针对你的构建环境的全部的本地用户配置信息。`local.conf` 文件包含了多种配置的文档。这里全部的变量会覆盖当前环境下其它地方的变量设置的值，除非这个变量是硬编码在一个文件的（比如，使用  ‘=’ 替代 ‘？=’）。有些变量因为各种原因是硬编码的，但是这些变量相对很少。

Edit this file to set the `[MACHINE][3525]` for which you want to build, which package types you wish to use ([`PACKAGE_CLASSES`][3986]), and the location from which you want to access downloaded files (`[DL_DIR][3526]`).
编辑这个文件设置 `[MACHINE][3525]` 为你想要构建的机器类型，要用那种类型的软件包（[`PACKAGE_CLASSES`][3986]），以及你想在哪里访问下载的文件（`[DL_DIR][3526]`）。

If `local.conf` is not present when you start the build, the OpenEmbedded build system creates it from `local.conf.sample` when you `source` the top-level build environment setup script (i.e. [`oe-init-build-env`][3987] or [`oe-init-build-env-memres`][3988]).
如果当你开始构建时 `local.conf` 不存在，在你 `source` 顶层构建环境设置脚本（即 [`oe-init-build-env`][3987] or [`oe-init-build-env-memres`][3988]）时，OpenEmbedded 构建系统会通过 `local.conf.sample` 创建一个。。

The source `local.conf.sample` file used depends on the `$TEMPLATECONF` script variable, which defaults to `meta-poky/conf` when you are building from the Yocto Project development environment and defaults to `meta/conf` when you are building from the OpenEmbedded Core environment. Because the script variable points to the source of the `local.conf.sample` file, this implies that you can configure your build environment from any layer by setting the variable in the top-level build environment setup script as follows:
源 `local.conf.sample` 文件的使用根据 `$TEMPLATECONF` 脚本变量而定当你从 Yocto 项目开发环境构建时，默认是 `meta-poky/conf` ，当你从 OpenEmbedded Core 环境构建时，默认是 `meta/conf`。因为这个脚本指向了 `local.conf.sample` 的源，这就按时你可以从任何 layer 通过设置顶层构建环境设置脚本来配置你的构建环境：

```
     TEMPLATECONF=your_layer/conf

```

Once the build process gets the sample file, it uses `sed` to substitute final `${`[`OEROOT`][3989]`}` values for all `##OEROOT##` values.
一旦构建进程得到了示例文件，它使用 `sed` 替换全部的 `##OEROOT##` 的值为最终的 `${`[`OEROOT`][3989]`}`。

### Note

You can see how the `TEMPLATECONF` variable is used by looking at the `scripts/oe-setup-builddir` script in the [Source Directory][3990]. You can find the Yocto Project version of the `local.conf.sample` file in the `meta-poky/conf` directory.
你可以通过阅读 [Source Directory][3990] 中的 `scripts/oe-setup-builddir` 了解变量 `TEMPLATECONF` 是如何使用的。你能在 目录 `meta-poky/conf` 找到 Yocto 项目使用的 `local.conf.sample` 版本。

### 7.2.3. `build/conf/bblayers.conf`[¶][594]

This configuration file defines [layers][3991], which are directory trees, traversed (or walked) by BitBake. The `bblayers.conf` file uses the [`BBLAYERS`][3992] variable to list the layers BitBake tries to find.
这个配置文件定义了 [layers][3991]，它们是一些目录树，BitBake 会遍历（或者 walked）一遍。`bblayers.conf` 文件使用变量 [`BBLAYERS`][3992] 列出 BitBake 尝试寻找的 layer。

If `bblayers.conf` is not present when you start the build, the OpenEmbedded build system creates it from `bblayers.conf.sample` when you `source`the top-level build environment setup script (i.e. [`oe-init-build-env`][3993] or [`oe-init-build-env-memres`][3994]).
如果 `bblayers.conf` 在你开始构建时不存在，OpenEmbedded 会在你 `source` 顶层构建环境设置脚本（即 [`oe-init-build-env`][3993] or [`oe-init-build- env-memres`][3994]）时创通过 `bblayers.conf.sample` 创建这个文件。

The source `bblayers.conf.sample` file used depends on the `$TEMPLATECONF` script variable, which defaults to `meta-poky/conf` when you are building from the Yocto Project development environment and defaults to `meta/conf` when you are building from the OpenEmbedded Core environment. Because the script variable points to the source of the `bblayers.conf.sample` file, this implies that you can base your build from any layer by setting the variable in the top-level build environment setup script as follows:
使用那个 `bblayers.conf.sample` 源文件依赖于 `$TEMPLATECONF` 脚本变量，当你在 Yocto 项目开发环境构建时默认是 `meta-poky/conf`，而在 OpenEmbedded Core 环境构建时默认是 `meta/conf`。因为这个脚本变量指向了 `bblayers.conf.sample` 文件的源，这也暗示你可以通过设置顶层构建环境设置脚本的变量，从任何 layer 根据你的构建。，

```
     TEMPLATECONF=your_layer/conf

```

Once the build process gets the sample file, it uses `sed` to substitute final `${`[`OEROOT`][3995]`}` values for all `##OEROOT##` values.
一旦构建进程得到了示例文件，他就会使用 `sed` 替换全部 `##OEROOT##` 的值为最终 `${`[`OEROOT`][3995]`}` 的值。

### Note

You can see how the `TEMPLATECONF` variable `scripts/oe-setup-builddir` script in the [Source Directory][3996]. You can find the Yocto Project version of the `bblayers.conf.sample` file in the `meta-poky/conf` directory.
你可以在 [Source Directory][3996] 中的脚本 `scripts/oe-setup-builddir` 看到变量 `TEMPLATECONF` 是如何使用的。你可以在 `meta-poky/conf` 目录找到 Yocto 项目版的 `bblayers.conf.sample` 文件。

### 7.2.4. `build/conf/sanity_info`[¶][595]

This file indicates the state of the sanity checks and is created during the build.
这个文件指出了 sanity 检查的状态和它是在构建时创建的。

### 7.2.5. `build/downloads/`[¶][596]

This directory contains downloaded upstream source tarballs. You can reuse the directory for multiple builds or move the directory to another location. You can control the location of this directory through the `[DL_DIR][3527]` variable.
这个目录保存了下载的上游源 tar 包。你能为多次构建重用这个目录或者移动到另一个位置。你能通过变量 `[DL_DIR][3527]` 控制这个目录的位置。 

### 7.2.6. `build/sstate-cache/`[¶][597]

This directory contains the shared state cache. You can reuse the directory for multiple builds or move the directory to another location. You can control the location of this directory through the `[SSTATE_DIR][3528]` variable.
这个目录包含了共享状态缓存。你可以为多次构建使用这个目录或者移动这个目录到其他位置。你可以通过变量 `[SSTATE_DIR][3528]` 控制这个目录的位置。

### 7.2.7. `build/tmp/`[¶][598]

The OpenEmbedded build system creates and uses this directory for all the build system's output. The [`TMPDIR`][3997] variable points to this directory.
OpenEmbedded 构建系统为构建系统的全部输出创建和使用了这个目录。变量 [`TMPDIR`][3997] 指向了这个目录。

BitBake creates this directory if it does not exist. As a last resort, to clean up a build and start it from scratch (other than the downloads), you can remove everything in the `tmp` directory or get rid of the directory completely. If you do, you should also completely remove the `build/sstate-cache`directory.
如果这个目录不存在，BitBake 会创建它。作为最后一个清理构建和从头开始构建（而不是下载）的手段，你可以删除 `tmp` 目录下的全部东西，或者完全摆脱这个目录。如果你这么做，你应该也完全删除 `build/sstate-cache` 目录。

### 7.2.8. `build/tmp/buildstats/`[¶][599]

This directory stores the build statistics.
这个目录保存构建数据。

### 7.2.9. `build/tmp/cache/`[¶][600]

When BitBake parses the metadata (recipes and configuration files), it caches the results in `build/tmp/cache/` to speed up future builds. The results are stored on a per-machine basis.
当 BitBake 解析元数据（recipe 和配置文件），构建结果缓存在 `build/tmp/cache/` 加速以后的构建。结果根据每个机器存储。

During subsequent builds, BitBake checks each recipe (together with, for example, any files included or appended to it) to see if they have been modified. Changes can be detected, for example, through file modification time (mtime) changes and hashing of file contents. If no changes to the file are detected, then the parsed result stored in the cache is reused. If the file has changed, it is reparsed.
在之后的构建中，BitBake 检查每个 recipe（合起来举个例子，任何包含或 append 这个文件的）来查看他们是否已经被修改了。改变可以被查出来，举个例子，通过文件修改时间（mtime）变化和文件内容的哈希。如果文件没有被探测出变化，然后重用解析过的存储在缓存里的结果。如果文件变化了，就重新解析。

### 7.2.10. `build/tmp/deploy/`[¶][601]

This directory contains any "end result" output from the OpenEmbedded build process. The [`DEPLOY_DIR`][3998] variable points to this directory. For more detail on the contents of the `deploy` directory, see the "[Images][3999]" and "[Application Development SDK][4000]" sections.
这个目录包含了 OpenEmbedded 构建进程的全部“最终结果”输出。变量 [`DEPLOY_DIR`][3998] 指向这个目录。更多关于 `deploy` 目录的细节参见 "[Images][3999]" 和 "[Application Development SDK][4000]" 一节。

### 7.2.11. `build/tmp/deploy/deb/`[¶][602]

This directory receives any `.deb` packages produced by the build process. The packages are sorted into feeds for different architecture types.
这个目录接收构建进程产生的全部 `.deb` 软件包。这些软件包按照不同架构类型分类存储。

### 7.2.12. `build/tmp/deploy/rpm/`[¶][603]

This directory receives any `.rpm` packages produced by the build process. The packages are sorted into feeds for different architecture types.
这个目录接收构建进程产生的全部 `.rpm` 软件包。这些软件包按照不同架构类型分类存储。

### 7.2.13. `build/tmp/deploy/ipk/`[¶][604]

This directory receives `.ipk` packages produced by the build process.
这个目录接收构建进程产生的全部 `.ipk` 软件包。

### 7.2.14. `build/tmp/deploy/licenses/`[¶][605]

This directory receives package licensing information. For example, the directory contains sub-directories for `bash`, `busybox`, and `glibc` (among others) that in turn contain appropriate `COPYING` license files with other licensing information. For information on licensing, see the "[Maintaining Open Source License Compliance During Your Product's Lifecycle][4001]" section.
这个目录接收软件包的授权信息。举个例子，这个目录包含 `bash`, `busybox`, 和 `glibc` （尤其是）子目录，依次保存了合适的 `COPYING` 许可和其它许可信息。关于许可的信息参见 "[Maintaining Open Source License Compliance During Your Product's Lifecycle][4001]" 一节。

### 7.2.15. `build/tmp/deploy/images/`[¶][606]

This directory receives complete filesystem images. If you want to flash the resulting image from a build onto a device, look here for the image.
这个目录接收整个文件系统镜像。如果你想从构建环境烧写结果镜像到一个设备，在这里查找镜像。

Be careful when deleting files in this directory. You can safely delete old images from this directory (e.g. `core-image-*`). However, the kernel (`*zImage*`, `*uImage*`, etc.), bootloader and other supplementary files might be deployed here prior to building an image. Because these files are not directly produced from the image, if you delete them they will not be automatically re-created when you build the image again.
在这个目录删除文件要小心。你可以安全的删除这个目录下的旧镜像（比如，`core-image-*`）。然而，内核（`*zImage*`, `*uImage*`, 等等），引导程序和其它补充的文件可能会在构建镜像前部署到这里。因为这些文件不是直接从镜像生成的，如果你删除了他们讲不会在重新构建镜像时自动重新创建。

If you do accidentally delete files here, you will need to force them to be re-created. In order to do that, you will need to know the target that produced them. For example, these commands rebuild and re-create the kernel files:
如果你意外删除了这里的文件，你讲需要强制重新创造他们。为了这么做，你将需要知道产生它们的 target。举个例子，这些命令可以重新构建和重新创造内核文件：

```
     $ bitbake -c clean virtual/kernel
     $ bitbake virtual/kernel

```

### 7.2.16. `build/tmp/deploy/sdk/`[¶][607]

The OpenEmbedded build system creates this directory to hold toolchain installer scripts, which when executed, install the sysroot that matches your target hardware. You can find out more about these installers in the "[Building an SDK Installer][4002]" section in the Yocto Project Software Development Kit (SDK) Developer's Guide.
OpenEmbedded 构建系统创建这个目录放置工具链安装脚本，当执行脚本时，安装符合你的目标硬件的 sysroot。你可以在 Yocto Project Software Development Kit (SDK) Developer's Guide 的 "[Building an SDK Installer][4002]" 一节找到更多关于安装器的信息。

### 7.2.17. `build/tmp/sstate-control/`[¶][608]

The OpenEmbedded build system uses this directory for the shared state manifest files. The shared state code uses these files to record the files installed by each sstate task so that the files can be removed when cleaning the recipe or when a newer version is about to be installed. The build system also uses the manifests to detect and produce a warning when files from one task are overwriting those from another.
OpenEmbedded 构建系统为共享状态清单文件使用这个目录。共享状态代码使用这些文件记录每个 sstate task 安装的文件，这样在清理 recipe 或者要安装更新的版本时可以删掉这些文件。

### 7.2.18. `build/tmp/sysroots/`[¶][609]

Previous versions of the OpenEmbedded build system used to create a global shared sysroot per machine along with a native sysroot. Beginning with the 2.3 version of the Yocto Project, sysroots exist in recipe-specific [`WORKDIR`][4003] directories. Thus, the `build/tmp/sysroots/` directory is unused.
之前版本的 OpenEmbedded 构建系统习惯于为每个机器创建一个全局共享 sysroot 和一个本地 sysroot。从 2.3 版本的 Yocto 项目开始，sysroot 存在于 recipe 相关的 [`WORKDIR`][4003] 目录。因此，`build/tmp/sysroots/` 目录**不再使用**。

### Note

The `build/tmp/sysroots/` directory can still be populated using the `bitbake build-sysroots` command and can be used for compatibility in some cases. However, in general it is not recommended to populate this directory. Individual recipe-specific sysroots should be used.
仍然可以使用命令 `bitbake build-sysroots` 生成目录 `build/tmp/sysroots/`，在某些情况下也可以被用于兼容目的。然而，通常不建议产生这个目录。应该使用独立的 recipe 相关的 sysroot。

### 7.2.19. `build/tmp/stamps/`[¶][610]

This directory holds information that BitBake uses for accounting purposes to track what tasks have run and when they have run. The directory is sub-divided by architecture, package name, and version. Following is an example:
这个目录保存了 BitBake 用来以统计为目的跟踪那些 task 已经运行和什么时候运行的信息。这个目录按照架构，包名，和版本分成子目录。下面是例子：

```
     stamps/all-poky-linux/distcc-config/1.0-r0.do_build-2fdd....2do

```

Although the files in the directory are empty of data, BitBake uses the filenames and timestamps for tracking purposes.
虽然目录中的这些文件没有数据， BitBake 使用文件名和时间戳实现跟踪目的。

For information on how BitBake uses stamp files to determine if a task should be rerun, see the "[Stamp Files and the Rerunning of Tasks][4004]" section.
关于 BitBake 如何使用时间戳文件来确定一个 task 是否应该重新运行，参见 "[Stamp Files and the Rerunning of Tasks][4004]" 一节。

### 7.2.20. `build/tmp/log/`[¶][611]

This directory contains general logs that are not otherwise placed using the package's `[WORKDIR][3529]`. Examples of logs are the output from the`do_check_pkg` or `do_distro_check` tasks. Running a build does not necessarily mean this directory is created.
这个目录使用软件包的 `[WORKDIR][3529]` 而不另外放置常规日志。日志的例子是 `do_check_pkg` or `do_distro_check` task 的输出。运行一次构建不是必要意味着这个会创建这个目录。

### 7.2.21. `build/tmp/work/`[¶][612]

This directory contains architecture-specific work sub-directories for packages built by BitBake. All tasks execute from the appropriate work directory. For example, the source for a particular package is unpacked, patched, configured and compiled all within its own work directory. Within the work directory, organization is based on the package group and version for which the source is being compiled as defined by the [`WORKDIR`][4005].
这个目录为 BitBake 构建的软件包 保存了架构相关的工作子目录。全部 task 都是从合适的工作目录执行的。举个例子，特定软件包的源的解压缩，配置和编译都在其自己的工作目录。在这个工作目录，根据包组合和在 [`WORKDIR`][4005] 中定义的要编译的源的版本进行组织。

It is worth considering the structure of a typical work directory. As an example, consider `linux-yocto-kernel-3.0` on the machine `qemux86` built within the Yocto Project. For this package, a work directory of `tmp/work/qemux86-poky-linux/linux-yocto/3.0+git1+<.....>`, referred to as the `[WORKDIR][3530]`, is created. Within this directory, the source is unpacked to `linux-qemux86-standard-build` and then patched by Quilt. (See the "[Using Quilt in Your Workflow][4006]" section in the Yocto Project Development Manual for more information.) Within the `linux-qemux86-standard-build` directory, standard Quilt directories `linux-3.0/patches` and `linux-3.0/.pc` are created, and standard Quilt commands can be used.
值得考虑的是一个典型工作目录的结构。作为一个例子，考虑 Yocto 项目中，在机器 `qemux86` 上构建的 `linux-yocto-kernel-3.0`。对于这个包，有一个目录 `tmp/work/qemux86-poky-linux/linux-yocto/3.0+git1+<.....>`，称为是 `[WORKDIR][3530]` 被创建了。在这个目录中，源被解压缩到 `linux-qemux86-standard-build` 然后被 Quilt 打补丁（更多信息参见 Yocto Project Development Manual 的 "[Using Quilt in Your Workflow][4006]" 一节）。在 `linux-qemux86-standard-build` 目录中，创建了 Quilt 目录 `linux-3.0/patches` 和 `linux-3.0/.pc`，而且标准 Quilt 命令可以使用。

There are other directories generated within `WORKDIR`. The most important directory is `WORKDIR/temp/`, which has log files for each task (`log.do_*.pid`) and contains the scripts BitBake runs for each task (`run.do_*.pid`). The `WORKDIR/image/` directory is where "make install" places its output that is then split into sub-packages within `WORKDIR/packages-split/`.
这里还有其它和 `WORKDIR` 一次生成的目录。最重要的目录是 `WORKDIR/temp/`，它保存了每个 task（`log.do_*.pid`）的日志和 BitBake 为每个 task 运行的脚本（`run.do_*.pid`）。"make install" 将他的输出放到目录 `WORKDIR/image/` ，然后再分割成子目录发到 `WORKDIR/packages-split/`。


### 7.2.22. `build/tmp/work/ _`tunearch`_ / _`recipename`_ / _`version`_ /`[¶][613]

The recipe work directory ( _`recipe_work_directory`_ ).
recipe 工作目录（_`recipe_work_directory`_）。

As described earlier in the "[`build/tmp/sysroots/`][4007]" section, beginning with the 2.3 release of the Yocto Project, the OpenEmbedded build system builds each recipe in its own work directory (i.e. [`WORKDIR`][4008]). The path to the work directory is constructed using the architecture of the given build (e.g.[`TUNE_PKGARCH`][4009], [`MACHINE_ARCH`][4010], or "allarch"), the recipe name, and the version of the recipe (i.e. [`PE`][4011]`:`[`PV`][4012]`-`[`PR`][4013]).
如之前在 "[`build/tmp/sysroots/`][4007]" 一节的描述，从 2.3 版的 Yocto 项目开始， OpenEmbedded 构建系统在每个 recipe 自己的工作目录进行构建（即 [`WORKDIR`][4008]）。工作目录的路径是使用给定构建（比如 [`TUNE_PKGARCH`][4009], [`MACHINE_ARCH`][4010]，"allarch"）的架构构成的，recipe 的名字，和 recipe 的版本（即 [`PE`][4011]`:`[`PV`][4012]`-`[`PR`][4013]）。

A number of key subdirectories exist within each recipe work directory:
每个 recipe 的工作目录下存在若干关键子目录：

*   `_`recipe_work_directory`_ /temp`: Contains the log files of each task executed for this recipe, the "run" files for each executed task, which contain the code run, and a `log.task_order` file, which lists the order in which tasks were executed.
*	`_`recipe_work_directory`_ /temp`: 保存了 recipe 执行的每个 task 的日志文件，保存每个执行的 task 的运行的代码的 “run” 文件保存了和一个保存了执行的任务的 `log.task_order` 文件。

*   `_`recipe_work_directory`_ /image`: Contains the output of the [`do_install`][1198] task, which corresponds to the `${`[`D`][1199]`}` variable in that task.
*	`_`recipe_work_directory`_ /image`: 保存了 [`do_install`][1198] task 的输出，对应 task 中的变量 `${`[`D`][1199]`}`。

*   `_`recipe_work_directory`_ /pseudo`: Contains the pseudo database and log for any tasks executed under pseudo for the recipe.
*	`_`recipe_work_directory`_ /pseudo`: 保存了假的数据库和全部在 pseude 模式下的 recipe 执行的任务的日志。

*   `_`recipe_work_directory`_ /sysroot-destdir`: Contains the output of the [`do_populate_sysroot`][1200] task.
*	`_`recipe_work_directory`_ /sysroot-destdir`: 保存了 [`do_populate_sysroot`][1200] task 的输出。

*   `_`recipe_work_directory`_ /package`: Contains the output of the [`do_package`][1201] task before the output is split into individual packages.
*	`_`recipe_work_directory`_ /package`: 在 [`do_package`][1201] task 的输出被分割到独立的软件包之前保存了这些输出。

*   `_`recipe_work_directory`_ /packages-split`: Contains the output of the `do_package` task after the output has been split into individual packages. Subdirectories exist for each individual package created by the recipe.

*   `_`recipe_work_directory`_ /recipe-sysroot`: A directory populated with the target dependencies of the recipe. This directory looks like the target filesystem and contains libraries that the recipe might need to link against (e.g. the C library).
*   `_`recipe_work_directory`_ /recipe-sysroot`: 和 target 依赖的 recipe 一起生成的目录。这个目录看起来像目标文件系统，保存了 recipe 可能需要再次链接的库文件（比如，C 库）。

*   `_`recipe_work_directory`_ /recipe-sysroot-native`: A directory populated with the native dependencies of the recipe. This directory contains the tools the recipe needs to build (e.g. the compiler, Autoconf, libtool, and so forth).
*   `_`recipe_work_directory`_ /recipe-sysroot-native`: 一个和本地依赖的 reicpe 一起生成的目录。这个目录保存了 recipe 需要构建的工具（比如，编译器，Autoconf，libtool 和其它工具）。

*   `_`recipe_work_directory`_ /build`: This subdirectory applies only to recipes that support builds where the source is separate from the build artifacts. The OpenEmbedded build system uses this directory as a separate build directory (i.e. `${`[`B`][1202]`}`).
*   `_`recipe_work_directory`_ /build`: 这个子目录仅应用于支持构建那些源是和构建产品分开的 recipe。OpenEmbedded 构建系统使用这个目录作为一个独立的构建目录（即，`${`[`B`][1202]`}`）。

### 7.2.23. `build/tmp/work-shared/`[¶][614]

For efficiency, the OpenEmbedded build system creates and uses this directory to hold recipes that share a work directory with other recipes. In practice, this is only used for `gcc` and its variants (e.g. `gcc-cross`, `libgcc`, `gcc-runtime`, and so forth).
为了效率，OpenEmbedded 构建系统创建和使用这个目录来保存和其它 recipe 共享一个工作目录的 recipe。实践中，这个仅用于 `gcc` 和它的变体（比如，`gcc-cross`，`libgcc`, `gcc-runtime`,等等）。

### 7.3. 元数据 - `meta/`[¶][1203]

As mentioned previously, [Metadata][4241] is the core of the Yocto Project. Metadata has several important subdivisions:
如前文提到的，[Metadata][4241] 是 Yocto 项目的核心。 元数据有一个重要的子版本：

### 7.3.1. `meta/classes/`[¶][615]

This directory contains the `*.bbclass` files. Class files are used to abstract common code so it can be reused by multiple packages. Every package inherits the `base.bbclass` file. Examples of other important classes are `autotools.bbclass`, which in theory allows any Autotool-enabled package to work with the Yocto Project with minimal effort. Another example is `kernel.bbclass` that contains common code and functions for working with the Linux kernel. Functions like image generation or packaging also have their specific class files such as `image.bbclass`, `rootfs_*.bbclass` and`package*.bbclass`.
这个目录目录保存了 `*.bbclass` 文件。Class 文件勇于抽象共同的代码，这样他就可以被多个软件包重用。每个软件包都继承了 `base.bbclass` 文件。示例，其它重要的 class 是 `autotools.bbclass`，理论上允许全部使能了 Autotool 的软件包和 Yocto 一起工作时只需要最小的努力。像镜像生成或者打包这些功能也有他们特定的 class 文件，比如 `image.bbclass` ，`rootfs_*.bbclass` 和 `package*.bbclass`。

For reference information on classes, see the "[Classes][4014]" chapter.
关于 class 的参考信息，参见 "[Classes][4014]" 一节。

### 7.3.2. `meta/conf/`[¶][616]

This directory contains the core set of configuration files that start from `bitbake.conf` and from which all other configuration files are included. See the include statements at the end of the `bitbake.conf` file and you will note that even `local.conf` is loaded from there. While `bitbake.conf` sets up the defaults, you can often override these by using the (`local.conf`) file, machine file or the distribution configuration file.
这个目录保存了配置文件的核心集，从 `bitbake.conf` 开始，包括其它全部配置文件。看一下 `bitbake.conf` 文件最后的 include 语句，你将注意到甚至 `local.conf` 从哪里加载。当 `bitbake.conf` 设置默认值，通常你能通过使用 （`local.conf`） 文件，机器文件，或者发行版配置文件来重载默认值。

### 7.3.3. `meta/conf/machine/`[¶][617]

This directory contains all the machine configuration files. If you set `MACHINE = "qemux86"`, the OpenEmbedded build system looks for a `qemux86.conf`file in this directory. The `include` directory contains various data common to multiple machines. If you want to add support for a new machine to the Yocto Project, look in this directory.
这个目录保存了全部的机器配置文件。

### 7.3.4. `meta/conf/distro/`[¶][618]

The contents of this directory controls any distribution-specific configurations. For the Yocto Project, the `defaultsetup.conf` is the main file here. This directory includes the versions and the `SRCDATE` definitions for applications that are configured here. An example of an alternative configuration might be `poky-bleeding.conf`. Although this file mainly inherits its configuration from Poky.
这个目录的内容控制了全部发行版相关的配置。对于 Yocto 项目来说，`defaultsetup.conf` 是这里的主文件。这个目录包括了在这里配置的应用程序的版本和`SRCDATE` 的定义。一个供选择的配置的例子可能是 `poky-bleeding.conf`。虽然这个文件主要从 Poky 集成了它的配置。

### 7.3.5. `meta/conf/machine-sdk/`[¶][619]

The OpenEmbedded build system searches this directory for configuration files that correspond to the value of [`SDKMACHINE`][4015]. By default, 32-bit and 64-bit x86 files ship with the Yocto Project that support some SDK hosts. However, it is possible to extend that support to other SDK hosts by adding additional configuration files in this subdirectory within another layer.
OpenEmbedded 构建系统在这里寻找对应 [`SDKMACHINE`][4015] 的配置文件。默认情况下，Yocto 项目附带的 32-bit 和 64-bit x86 文件支持一些 SDK 主机。然而可以通过在其他 layer 的子目录添加额外的配置文件进行扩展支持其他的 SDK 主机。

### 7.3.6. `meta/files/`[¶][620]

This directory contains common license files and several text files used by the build system. The text files contain minimal device information and lists of files and directories with known permissions.
这个目录包含了通常的授权文件和几个用于构建系统的文本文件。这些文本文件包含了已知权限的最少的设备信息和文件列表和目录。

### 7.3.7. `meta/lib/`[¶][621]

This directory contains OpenEmbedded Python library code used during the build process.
这个目录保存了 OpenEmbedded 用于构建过程的 Python 库代码。

### 7.3.8. `meta/recipes-bsp/`[¶][622]

This directory contains anything linking to specific hardware or hardware configuration information such as "u-boot" and "grub".
这个目录保存了和特定硬件关联的所有东西或者见见配置文件，比如 "u-boot" 和 "grub"。

### 7.3.9. `meta/recipes-connectivity/`[¶][623]

This directory contains libraries and applications related to communication with other devices.
这个目录保存了与其他设备通信相关的库和应用程序。

### 7.3.10. `meta/recipes-core/`[¶][624]

This directory contains what is needed to build a basic working Linux image including commonly used dependencies.
这个目录保存了用于构建一个基础的可以工作的 Linux 镜像，包括通常使用的依赖。

### 7.3.11. `meta/recipes-devtools/`[¶][625]

This directory contains tools that are primarily used by the build system. The tools, however, can also be used on targets.
这个目录保存用于构建的基础工具。这些工具，然而，也可以用于目标。

### 7.3.12. `meta/recipes-extended/`[¶][626]

This directory contains non-essential applications that add features compared to the alternatives in core. You might need this directory for full tool functionality or for Linux Standard Base (LSB) compliance.
这个目录保存了非必须的添加特性的应用程序，和核心中可选择的相比。你可能因为完全的工具功能或者符合 Linux 标准基础（LSB）需要这个目录。

### 7.3.13. `meta/recipes-gnome/`[¶][627]

This directory contains all things related to the GTK+ application framework.
这个目录保存了和 GTK+ 程序框架相关的全部东西。

### 7.3.14. `meta/recipes-graphics/`[¶][628]

This directory contains X and other graphically related system libraries
这个目录保存了 X 和其它图像相关的系统库。

### 7.3.15. `meta/recipes-kernel/`[¶][629]

This directory contains the kernel and generic applications and libraries that have strong kernel dependencies.
这个目录保存了内核和对内核强依赖的原生应用程序和库文件。

### 7.3.16. `meta/recipes-lsb4/`[¶][630]

This directory contains recipes specifically added to support the Linux Standard Base (LSB) version 4.x.
这个目录保存了特定的 recipe 来添加支持 LSB 4.x。

### 7.3.17. `meta/recipes-multimedia/`[¶][631]

This directory contains codecs and support utilities for audio, images and video.
这个目录保存了声音，图像和视频的解码器和支持工具。

### 7.3.18. `meta/recipes-rt/`[¶][632]

This directory contains package and image recipes for using and testing the `PREEMPT_RT` kernel.
这个目录保存了软件包和镜像的 recipe ， 用来使用和测试 `PREEMPT_RT` 内核。

### 7.3.19. `meta/recipes-sato/`[¶][633]

This directory contains the Sato demo/reference UI/UX and its associated applications and configuration data.
这个目录保存了 Sato 的示例/参考 UI/UX 和它的关联应用程序和配置数据。

### 7.3.20. `meta/recipes-support/`[¶][634]

This directory contains recipes used by other recipes, but that are not directly included in images (i.e. dependencies of other recipes).
这个目录保存了用于其它的 recipe 的 recipe ，但是这些并不直接包含进镜像（即，其它 recipe 的依赖）。

### 7.3.21. `meta/site/`[¶][635]

This directory contains a list of cached results for various architectures. Because certain "autoconf" test results cannot be determined when cross-compiling due to the tests not able to run on a live system, the information in this directory is passed to "autoconf" for the various architectures.


### 7.3.22. `meta/recipes.txt`[¶][636]

This file is a description of the contents of `recipes-*`.

